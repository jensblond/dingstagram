/* dingstagram â€“ v0.8
 * https://github.com/elfacht/dingstagram
 * @author Martin Szymanski / www.elfacht.com
 * @version 0.8
 */(function(e){"use strict";e.fn.dingstagram=function(t){var n=e.extend({userID:"",accessToken:"",size:"low",items:20,caption:!0,truncate:0,blank:!1},t),r="https://api.instagram.com/v1/users/"+n.userID+"/media/recent/?access_token="+n.accessToken,i=this,s={outputItems:function(){e.ajax({method:"GET",dataType:"jsonp",jsonp:"callback",jsonpCallback:"jsonpcallback",cache:!1,url:r,success:function(t,r){var i=n.items-1;e.each(t.data,function(e){if(e>i)return!1;s.template(t,e)});s.addClasses()}})},template:function(t,r){var o="dingstagram-item",u="dingstagram-link",a="dingstagram-img",f="dingstagram-caption",l="dingstagram-figure",c=t.data[r].link,h=t.data[r].caption.text,p="",d="";n.size==="thumbnail"?p=t.data[r].images.thumbnail.url:n.size==="standard"?p=t.data[r].images.standard_resolution.url:n.size==="low"&&(p=t.data[r].images.low_resolution.url);n.truncate>0&&(h=s.truncate(h,n.truncate));n.caption===!0&&(d=e(document.createElement("figcaption")).attr({"class":f}).html(h));var v=e(document.createElement("li")).attr({"class":o}).append(e(document.createElement("figure")).attr({"class":l}).append(e(document.createElement("a")).attr({href:c,title:h,"class":u}).append(e(document.createElement("img")).attr({src:p,alt:h,"class":a}))).append(d));i.append(v);n.blank===!0&&e("."+u).attr("target","_blank")},addClasses:function(){i.addClass("dingstagram")},truncate:function(t,n){var t=e.trim(t).substring(0,n).split(" ").slice(0,-1).join(" ")+"...";return t}};return this.each(function(){s.outputItems()})}})(jQuery);