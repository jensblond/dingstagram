/* dingstagram 0.8 - A simple jQuery Instagram plugin for developers
 *
 * Copyright (c) 2014 Martin Szymanski (http://www.elfacht.com)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://opensource.org/licenses/GPL-3.0) licenses.
 */(function(e){"use strict";e.fn.dingstagram=function(t){var n=e.extend({userID:"",accessToken:"",baseClass:"dingstagram",size:"low",items:20,caption:!0,truncate:0,blank:!1},t),r="https://api.instagram.com/v1/users/"+n.userID+"/media/recent/?access_token="+n.accessToken,i=this,s={outputItems:function(){e.ajax({method:"GET",dataType:"jsonp",jsonp:"callback",jsonpCallback:"jsonpcallback",cache:!1,url:r,success:function(t,r){var i=n.items-1;e.each(t.data,function(e){s.template(t,e);return e<i});s.addClasses()}})},template:function(t,r){var o=n.baseClass+"-item",u=n.baseClass+"-link",a=n.baseClass+"-img",f=n.baseClass+"-caption",l=n.baseClass+"-figure",c=t.data[r].link,h=t.data[r].caption.text,p="",d="";switch(n.size){case"thumbnail":p=t.data[r].images.thumbnail.url;break;case"standard":p=t.data[r].images.standard_resolution.url;break;case"low":p=t.data[r].images.low_resolution.url}n.truncate>0&&(h=s.truncate(h,n.truncate));n.caption===!0&&(d=e(document.createElement("figcaption")).attr({"class":f}).html(h));var v=e(document.createElement("li")).attr({"class":o}).append(e(document.createElement("figure")).attr({"class":l}).append(e(document.createElement("a")).attr({href:c,title:h,"class":u}).append(e(document.createElement("img")).attr({src:p,alt:h,"class":a}))).append(d));i.append(v);n.blank===!0&&e("."+u).attr("target","_blank")},addClasses:function(){i.addClass(n.baseClass)},truncate:function(t,n){var t=e.trim(t).substring(0,n).split(" ").slice(0,-1).join(" ")+"...";return t}};return this.each(function(){s.outputItems()})}})(jQuery);