/* dingstagram 0.8.2 - A simple jQuery Instagram plugin for developers
 *
 * GitHub: https://github.com/elfacht/dingstagram
 * Copyright (c) 2014 Martin Szymanski (http://www.elfacht.com)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://opensource.org/licenses/GPL-3.0) licenses.
 */(function(e){"use strict";e.fn.dingstagram=function(t){var n=e.extend({userID:"",accessToken:"",baseClass:"dingstagram",size:"low",items:20,showAll:!1,caption:!0,truncate:0,targetBlank:!1,complete:function(){}},t),r="https://api.instagram.com/v1/users/"+n.userID+"/media/recent/?access_token="+n.accessToken,i=this,s={outputItems:function(){e.ajax({method:"GET",dataType:"jsonp",jsonp:"callback",jsonpCallback:"jsonpcallback",cache:!1,url:r,success:function(t,i){var o=n.items-1;switch(n.showAll){case!0:s.outputAll(r,0);break;case!1:e.each(t.data,function(e){s.template(t,e);return e<o});n.complete()}s.addClasses()}})},outputAll:function(t,r){e.ajax({method:"GET",url:t,dataType:"jsonp",jsonp:"callback",jsonpCallback:"jsonpcallback",cache:!1,success:function(t,i){e.each(t.data,function(e,n){s.template(t,e)});t.pagination.next_url?s.outputAll(t.pagination.next_url,++r):n.complete()}})},template:function(t,r){var o=n.baseClass+"-item",u=n.baseClass+"-link",a=n.baseClass+"-img",f=n.baseClass+"-caption",l=n.baseClass+"-figure",c=t.data[r].link,h="",p="",d="";if(t.data[r].caption!=null){if(t.data[r].caption.text!=null)var h=t.data[r].caption.text}else var h="";switch(n.size){case"thumbnail":p=t.data[r].images.thumbnail.url;break;case"standard":p=t.data[r].images.standard_resolution.url;break;case"low":p=t.data[r].images.low_resolution.url}n.truncate>0&&(h=s.truncate(h,n.truncate));n.caption===!0&&(d=e(document.createElement("figcaption")).attr({"class":f}).html(h));var v=e(document.createElement("li")).attr({"class":o}).append(e(document.createElement("figure")).attr({"class":l}).append(e(document.createElement("a")).attr({href:c,title:h,"class":u}).append(e(document.createElement("img")).attr({src:p,alt:h,"class":a}))).append(d));i.append(v);n.targetBlank===!0&&e("."+u).attr("target","_blank")},addClasses:function(){i.addClass(n.baseClass)},truncate:function(t,n){var t=e.trim(t).substring(0,n).split(" ").slice(0,-1).join(" ")+"...";return t}};return this.each(function(){s.outputItems()})}})(jQuery);